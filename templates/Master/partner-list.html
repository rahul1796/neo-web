
<!-- Plugins css -->
<link href="static/assets/libs/flatpickr/flatpickr.min.css" rel="stylesheet" type="text/css" />

    <!-- third party css -->
    
<link href="static/assets/libs/datatables/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css" />
<link href="static/assets/libs/datatables/responsive.dataTables.min.css" rel="stylesheet" type="text/css" /> 
<link href="static/assets/libs/datatables/responsive.dataTables.min.css" rel="stylesheet" type="text/css" />
<!-- third party css end -->
<style>
    .center {
        margin: auto;
        width: 90%;
        padding: 20px;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }
    
    .hidedialog {
        display: none;
    }    
</style>
<script>
    var MilestoneObject={};
    $(document).ready(function () {
        
        $("#tbl_list").dataTable().fnDestroy();
        $('.dropdown-search-filter').select2({
            placeholder:''
        });
        $(".date-picker").flatpickr();
        LoadPartnerTypes();		
        LoadTable(); 
        role_id=parseInt($('#hdn_home_user_role_id').val());
        if(role_id == 1 || role_id==15)
        {
            $('#btn_create').show();
            $('#btn_add').show();
        }
        else
        {
            $('#btn_create').show();
            $('#btn_add').hide();
        }
        if(role_id == 1)
        {
            $('#btn_upload').show();
        }
        else
        {
            $('#btn_upload').hide();
        }


    });
    function LoadPartnerTypes()
    {
        var URL=$('#hdn_web_url').val()+ "/GetPartnerTypes";
            $.ajax({
                type:"GET",
                url:URL,
                async:false,        
                beforeSend:function(x){ if(x && x.overrideMimeType) { x.overrideMimeType("application/json;charset=UTF-8"); } },
                datatype:"json",
                success: function (data){
                    if(data.PartnerTypes != null)
                    {
                        $('#ddlPartnerTypes').empty();
                        var count=data.PartnerTypes.length;
                        if( count> 0)
                        {
                            for(var i=0;i<count;i++)
                                $('#ddlPartnerTypes').append(new Option(data.PartnerTypes[i].Partner_Type_Name,data.PartnerTypes[i].Partner_Type_Id));
                            
                        }
                        else
                        {
                            $('#ddlPartnerTypes').append(new Option('ALL',''));
                        }
                    }
                },
                error:function(err)
                {
                    alert('Error! Please try again');
                    return false;
                }
            });
            return false;
    }
    function LoadTable()
    {
        vartable1 = $("#tbl_list").DataTable({
            "serverSide": true,
            "aLengthMenu": [[10, 25, 50], [10, 25, 50]],
            "paging": true,
            "pageLength": 10,
            "sPaginationType": "full_numbers",
            "scrollX": false,
            "destroy": true,
            "processing": true,
            "language": { "processing": 'Loading..!' },
            "ajax": {
                "url": $('#hdn_web_url').val()+ "/partner_list",
                "type": "POST",
                "dataType": "json",
                "data": function (d) {
                    d.partner_type_ids = $('#ddlPartnerTypes').val().toString() ;
                },
                error: function (e) {
                    $("#tbl_list tbody").empty().append('<tr class="odd"><td valign="top" colspan="16" class="dataTables_empty">ERROR</td></tr>');
                }

            },

            "columns": [
                { "data": "S_No"},
                {
                    "data": function (row, type, val, meta) {
                        var varButtons = ""; 
                        if(role_id == 1|| role_id==15)
                            varButtons += '<a onclick="EditPartnerDetail(\'' + row.Partner_Id + '\')" class="btn" style="cursor:pointer" ><i title="Edit Partner" class="fas fa-edit" ></i></a>';
                        return varButtons;
                    }
                },
                { "data": "Partner_Name" },
                { "data": "Partner_Type_Name"},
                { 
                "data": 
                function (row, type, val, meta) {
                    var varButtons = ""; 
                    if(row.Center_Count==0)
                        varButtons=row.Center_Count;
                    else{
                        varButtons += '<a onclick="GetPartnerCenters(\'' + row.Partner_Id + '\',\'' + row.Partner_Name + '\')"  style="color:blue;cursor:pointer" >' + row.Center_Count + '</a>';
                    }
                    return varButtons;
                }
                },
                { 
                    "data": function (row, type, val, meta) {
                        var varButtons = ""; /*
                        if(row.User_Count=="")
                            varButtons=row.User_Count;
                        else
                        {
                            varButtons += '<a onclick="GetPartnerUsers(\'' + row.Partner_Id + '\',\''+row.Partner_Type_Id+ '\')"  style="color:blue;cursor:pointer" >' + row.User_Count + '</a>';
                        }*/
                        varButtons += '<a onclick="GetPartnerUsers(\'' + row.Partner_Id + '\',\''+row.Partner_Type_Id+ '\',\'' + row.Partner_Name + '\')"  style="color:blue;cursor:pointer" >' + row.User_Count + '</a>';
                        return varButtons;
                        }
                },
                { 
                    "data": function (row, type, val, meta) {
                        var varButtons = "";
                        varButtons += '<a onclick="GetPartnerContract(\'' + row.Partner_Id + '\',\''+row.Partner_Type_Id+ '\',\'' + row.Partner_Name + '\')"  style="color:blue;cursor:pointer" >' + row.Partner_Contract_Count + '</a>';
                        return varButtons;
                    }
                },
                { "data": "Address"},
                { "data": function (row, type, val, meta) {
                    var varStatus = ""; 
                    if(row.Is_Active)
                        varStatus="Active";
                    else
                        varStatus="In Active";
                    return varStatus;
                    }
                }
            ],
            drawCallback: function(){
                $('#tbl_list_paginate ul.pagination').addClass("pagination-rounded");
            }
        });
    }
    function EditPartnerDetail(PartnerId)
    {
        $('#hdn_partner_id').val(PartnerId);
        $('#form1').submit();
    }
    function GetPartnerUsers(PartnerId,PartnerTypeId,PartnerName)
    {
        $('#hdn_modal_partner_id').val(PartnerId);
        $('#headerUsers').text(PartnerName);
        var URL=$('#hdn_web_url').val()+ "/GetPartnerUsers?partner_id="+PartnerId;
        $.ajax({
            type:"GET",
            url:URL,
            async:false,
            overflow:true,        
            beforeSend:function(x){ if(x && x.overrideMimeType) { x.overrideMimeType("application/json;charset=UTF-8"); } },
            datatype:"json",
            success: function (data){
                varHtml='';
                $("#tbl_users").dataTable().fnDestroy();
                $("#tbl_users tbody").empty();
                if(!jQuery.isEmptyObject(data))
                {   if (data.PartnerUsers != null){
                        count=data.PartnerUsers.length;
                        if (count>0)
                        {   varHtml='';
                            console.log(count);
                            for(var i=0;i<count;i++)
                            {
                                td_open= '  <td style="text-align:center;">' ;
                                td_close=   '</td>';       
                                varHtml+='<tr>';
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerUsers[i].S_No +'</td>';
                                if($('#hdn_home_user_role_id').val()!='37')
                                    varHtml+='  <td style="text-align:center;">'+'<a onclick="EditModal(\'' + data.PartnerUsers[i].User_Name + '\',\'' + data.PartnerUsers[i].Email + '\',\'' + data.PartnerUsers[i].Mobile + '\',\'' + data.PartnerUsers[i].Is_Active + '\',\'' + data.PartnerUsers[i].Partner_User_Id + '\')" class="btn" style="cursor:pointer" ><i title="Edit Partner User" class="fas fa-edit" ></i></a>'+'</td>';
                                else
                                    varHtml+='  <td style="text-align:center;">'+ ''+'</td>';
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerUsers[i].User_Name +'</td>';
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerUsers[i].Email +'</td>';                    
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerUsers[i].Mobile +'</td>';
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerUsers[i].Role +'</td>';   
                                varHtml+='</tr>';                            
                            }
                            $("#tbl_users tbody").append(varHtml);
                                $("#tbl_users").DataTable({
                                drawCallback: function(){
                                    $('#tbl_users_paginate ul.pagination').addClass("pagination-rounded");
                                }
                            });
                                $('#mdl_Partner_Users').modal('show');
                                varHtml='';
                        }
                        else
                        {
                            //varHtml='<tr><td colspan="4" style="text-align:center;">No records found</td></tr>'                            
                            //$("#tbl_users tbody").append(varHtml);
                            $("#tbl_users").DataTable();
                            $('#mdl_Partner_Users').modal('show');
                        } 
                        
                    }
                }
                else
                {
                    //varHtml='<tr><td colspan="4" style="text-align:center;">No records found</td></tr>'
                    //$("#tbl_users tbody").append(varHtml);
                    $("#tbl_users").DataTable();
                    $('#mdl_Partner_Users').modal('show');
                }   
            },
            error:function(err)
            {
                alert('Error! Please try again');
                return false;
            }
        });
        return false;
    }
    function GetPartnerContract(PartnerId,PartnerTypeId,PartnerName)
    {
        $('#hdn_modal_partner_id2').val(PartnerId);
        $('#headerPartnerContract').text(PartnerName);
        var URL=$('#hdn_web_url').val()+ "/GetPartnerContract?partner_id="+PartnerId;
        var doc;
        var fileExtentionDOC = ['doc','docx']
        var fileExtentionPDF = ['pdf']
        $.ajax({
            type:"GET",
            url:URL,
            async:false,
            overflow:true,        
            beforeSend:function(x){ if(x && x.overrideMimeType) { x.overrideMimeType("application/json;charset=UTF-8"); } },
            datatype:"json",
            success: function (data){
                varHtml='';
                $("#tbl_partner_contract").dataTable().fnDestroy();
                $("#tbl_partner_contract tbody").empty();
                if(!jQuery.isEmptyObject(data))
                {   if (data.PartnerContract != null){
                        count=data.PartnerContract.length;
                        if (count>0)
                        {   varHtml='';
                            //console.log(count);
                            for(var i=0;i<count;i++)
                            {
                                td_open= '  <td style="text-align:center;">' ;
                                td_close=   '</td>';       
                                varHtml+='<tr>';
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerContract[i].S_No +'</td>';
                                
                                // if($('#hdn_home_user_role_id').val()!='50')
                                //     varHtml+='  <td style="text-align:center;">'+'<a onclick="EditModal(\'' + data.PartnerUsers[i].User_Name + '\',\'' + data.PartnerUsers[i].Email + '\',\'' + data.PartnerUsers[i].Mobile + '\',\'' + data.PartnerUsers[i].Is_Active + '\',\'' + data.PartnerUsers[i].Partner_User_Id + '\')" class="btn" style="cursor:pointer" ><i title="Edit Partner User" class="fas fa-edit" ></i></a>'+'</td>';
                                // else
                                //     varHtml+='  <td style="text-align:center;">'+ ''+'</td>';
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerContract[i].Partner_Contract_Name +'</td>';
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerContract[i].Partner_Contract_Code +'</td>';                    
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerContract[i].Start_Date +'</td>';
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerContract[i].End_Date +'</td>';   
                                doc = data.PartnerContract[i].Mou
                                //doc.split('.')[doc.split('.').length-1] doc.split('.').pop()
                                if (doc=='NA' || doc=='')
                                    varHtml+='  <td style="text-align:center;">NA</td>';
                                else if (fileExtentionPDF.includes(doc.split('.').pop().toLowerCase()))
                                    varHtml+='  <td style="text-align:center;">'+ '<a href=' + data.S3_Path + data.PartnerContract[i].Mou.replace(" ", "%20") + ' target="_blank" title="Open image in new tab"><img src='+ 'static/assets/images/pdf-icon.png' +' style="height:20px;width:30px;border:0px solid lightgray;"/></a>'+'</td>';
                                else if (fileExtentionDOC.includes(doc.split('.').pop().toLowerCase()))
                                    varHtml+='  <td style="text-align:center;">'+ '<a href=' + data.S3_Path + data.PartnerContract[i].Mou.replace(" ", "%20") + ' target="_blank" title="Open image in new tab"><img src='+ 'static/assets/images/document-download-icon.png' +' style="height:20px;width:30px;border:0px solid lightgray;"/></a>'+'</td>';
                                else
                                    varHtml+='  <td style="text-align:center;">'+ '<a href=' + data.S3_Path + data.PartnerContract[i].Mou.replace(" ", "%20") + ' target="_blank" title="Open image in new tab"><img src='+ data.S3_Path + data.PartnerContract[i].Mou.replace(" ", "%20") +' style="height:20px;width:30px;border:0px solid lightgray;"/></a>'+'</td>';
                                //varHtml+='  <td style="text-align:center;">'+ data.PartnerContract[i].Mou +'</td>';   
                                varHtml+='</tr>';                            
                            }
                            $("#tbl_partner_contract tbody").append(varHtml);
                                $("#tbl_partner_contract").DataTable({
                                drawCallback: function(){
                                    $('#tbl_partner_contract_paginate ul.pagination').addClass("pagination-rounded");
                                }
                            });
                                $('#mdl_Partner_Contract').modal('show');
                                varHtml='';
                        }
                        else
                        {
                            //varHtml='<tr><td colspan="4" style="text-align:center;">No records found</td></tr>'                            
                            //$("#tbl_users tbody").append(varHtml);
                            $("#tbl_partner_contract").DataTable();
                            $('#mdl_Partner_Contract').modal('show');
                        }
                    }
                }
                else
                {
                    //varHtml='<tr><td colspan="4" style="text-align:center;">No records found</td></tr>'
                    //$("#tbl_users tbody").append(varHtml);
                    $("#tbl_partner_contract").DataTable();
                    $('#mdl_Partner_Contract').modal('show');
                }   
            },
            error:function(err)
            {
                alert('Error! Please try again');
                return false;
            }
        });
        return false;
    }
    function GetPartnerCenters(PartnerId,PartnerName)
    {
        $('#hdn_modal_partner_id_center').val(PartnerId);
        $('#headerCenters').text(PartnerName);
        var URL=$('#hdn_web_url').val()+ "/GetPartnerCenters?partner_id="+PartnerId;
        $.ajax({
            type:"GET",
            url:URL,
            async:false,
            overflow:true,        
            beforeSend:function(x){ if(x && x.overrideMimeType) { x.overrideMimeType("application/json;charset=UTF-8"); } },
            datatype:"json",
            success: function (data){
                varHtml='';
                $("#tbl_centers").dataTable().fnDestroy();
                $("#tbl_centers tbody").empty();
                if(!jQuery.isEmptyObject(data))
                {   if (data.PartnerCenters != null){
                        count=data.PartnerCenters.length;
                        if (count>0)
                        {   varHtml='';
                            //console.log(count);
                            for(var i=0;i<count;i++)
                            {
                                td_open= '  <td style="text-align:center;">' ;
                                td_close=   '</td>';       
                                varHtml+='<tr>';
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerCenters[i].S_No +'</td>';
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerCenters[i].Center_Name +'</td>';
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerCenters[i].Center_Code +'</td>';
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerCenters[i].Center_Type_Name +'</td>';                    
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerCenters[i].Region_Name +'</td>';  
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerCenters[i].State_Name +'</td>';                    
                                varHtml+='  <td style="text-align:center;">'+ data.PartnerCenters[i].District_Name +'</td>';  
                                varHtml+='</tr>';                            
                            }
                            $("#tbl_centers tbody").append(varHtml);
                                $("#tbl_centers").DataTable({
                                drawCallback: function(){
                                    $('#tbl_centers_paginate ul.pagination').addClass("pagination-rounded");
                                }
                            });
                                $('#mdl_Partner_Centers').modal('show');
                                varHtml='';
                        }
                        else
                        {
                            //varHtml='<tr><td colspan="4" style="text-align:center;">No records found</td></tr>'                            
                            //$("#tbl_users tbody").append(varHtml);
                            $("#tbl_centers").DataTable();
                            $('#mdl_Partner_Centers').modal('show');
                        } 
                        
                    }
                }
                else
                {
                    //varHtml='<tr><td colspan="4" style="text-align:center;">No records found</td></tr>'
                    //$("#tbl_users tbody").append(varHtml);
                    $("#tbl_centers").DataTable();
                    $('#mdl_Partner_Centers').modal('show');
                }   
            },
            error:function(err)
            {
                alert('Error! Please try again');
                return false;
            }
        });
        return false;
    }
    
    function AddModal()
    {       
        $('#isactive').prop('checked',true);
        $('#mdl_Partner_Users').modal('hide');
        $('#mdl_add_edit_Users').modal('show');
    }
    function EditModal(Name,Email,Mobile,IsActive,PartnerUserId)
    {       
        if(IsActive)
            $('#isactive').prop('checked',true);
        else 
            $('#isactive').prop('checked',false);
        $('#UserName').val(Name);
        $('#Email').val(Email);
        $('#Mobile').val(Mobile);
        $('#hdn_partner_user_id').val(PartnerUserId);
        $('#mdl_Partner_Users').modal('hide');
        $('#mdl_add_edit_Users').modal('show');
    }
    function AddeEditPartnerUser()
    {
        if($('#Mobile').val().length!=10)
        {
            alert('Please enter 10 digit mobile number.');
            return false;
        }
        var URL=$('#hdn_web_url').val()+ "/add_edit_partner_user";
        $.ajax({
            type:"POST",
            url:URL,
            data:{
                "UserName" : $('#UserName').val(),
                "Mobile" : $('#Mobile').val(),
                "Email" : $('#Email').val(),
                "isactive" : $('#isactive').prop('checked'),
                "PartnerId":$('#hdn_modal_partner_id').val(),
                "PartnerUserId":$('#hdn_partner_user_id').val()
            },
            success:function(data){
                var message="",title="",icon="";
                if(data.PopupMessage.qp_flag==2){
                    message=data.PopupMessage.message;
                    title="Error";
                    icon="error";
                }
                else{
                    message=data.PopupMessage.message;
                    title="Success";
                    icon="success";
                }
                swal({   
                            title:title,
                            text:message,
                            icon:icon,
                            confirmButtonClass:"btn btn-confirm mt-2"
                            }).then(function(){
                                $('#mdl_add_edit_Users').modal('hide');
                                window.location.href = '/partner';
                            }); 
            },
            error:function(x){
                alert('error');
            }
        });
    }
//////////////////////////////// Upload parter target  UploadFileDataPartner
function Upload_DownloadPartnerTargetMdl()
{
    $('#HduploadFile').text('Upload Partner Target Plan.');
    $('#imgSpinner2').hide();
    $('#mdl_upload_download_partner_target_plan').modal('show');
    $('#myFile').val('');
}
function DownloadPartnerTargetPlanTemplate()
{
    window.location='/Bulk Upload/'+'PartnerTargetPlanTemplate.xlsx';
}
function Download_Partner_Target()
{   
    $("#imgSpinner2").show();
    if(1==0)
        {
            alert("Please select date.");
            $("#imgSpinner2").hide();
        }
    else{
        var id = document.getElementById('imgSpinner2_label');
        id.innerText ='Please wait while downloading...'

        var URL=$('#hdn_web_url').val()+ "/download_Partner_Target_dump"
        $.ajax({

            type: "POST",
            dataType: "json",
            url: URL, 
            data: {
                "user_id":$('#hdn_home_user_id').val(),
                "user_role_id":$('#hdn_home_user_role_id').val(),
                "user_region_id":$('#hdn_user_region_id').val()
            },
            success: function(resp) 
            {
                if (resp.Status){
                    $("#imgSpinner2").hide();
                    var varAnchor = document.getElementById('lnkDownload');
                    varAnchor.href = $('#hdn_web_url').val() + '/Bulk Upload/' + resp.filename;
                    try 
                        { 
                            //in firefox
                            varAnchor.click();
                            return;
                        } catch(ex) {}
                        
                        try 
                        { 
                            // in chrome
                            if(document.createEvent) 
                            {
                                var e = document.createEvent('MouseEvents');
                                e.initEvent( 'click', true, true );
                                varAnchor.dispatchEvent(e);
                                return;
                            }
                        } catch(ex) {}
                        
                        try 
                        { 
                            // in IE
                            if(document.createEventObject) 
                            {
                                    var evObj = document.createEventObject();
                                    varAnchor.fireEvent("onclick", evObj);
                                    return;
                            }
                        } catch(ex) {}
                    
                }
                else{
                    console.log(resp)
                    //alert('Not success')
                    $("#imgSpinner").hide();
                }
            },
            error:function()
            {
                //$("#imgSpinner").hide();
            }
        });
    }
}
function ForceDownload(varUrl, varFileName)
{
    var link = document.createElement('a');
    link.setAttribute('href', varUrl);
    link.setAttribute('download', varFileName);
    link.setAttribute('target', '_blank');
    link.style.display = 'none';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
}

function UploadFileDataPartner(){
    
    var id = document.getElementById('imgSpinner2_label');
    id.innerText ='Please wait while uploading...'

    if ($('#myFile').get(0).files.length === 0) {
        console.log("No files selected.");
    }
    else
    {
        var fileExtension = ['xlsx']
        if ($.inArray($('#myFile').val().split('.').pop().toLowerCase(), fileExtension) == -1) {
            alert("Formats allowed are : "+fileExtension.join(', '));
            return false;
        }
        else
        {          
            $("#imgSpinner2").show();
            var files=document.getElementById("myFile").files;
            var file=files[0];
            var status;
            UploadFileData(file,'');
        }
        
        var form_data = new FormData($('#formUpload')[0]);
        form_data.append('user_id',$('#hdn_home_user_id').val());
        form_data.append('user_role_id',$('#hdn_home_user_role_id').val());
        $.ajax({
            type: 'POST',
            url: $('#hdn_web_url').val()+ "/upload_partner_target_plan",
            enctype: 'multipart/form-data',
            data: form_data,
            contentType: false,
            cache: false,
            processData: false,
            success: function(data) 
            {
                var message="",title="",icon="";
                if(data.Status){
                    message=data.message;
                    title="Success";
                    icon="success";
                }
                else{
                    if (data.message=="Validation_Error"){
                        message=data.error;
                        title="Error";
                        icon="error";
                    }
                    else {
                        message=data.message;
                        title="Error";
                        icon="error";
                    }
                }
                var span = document.createElement("span");
                span.innerHTML = message;
                swal({   
                            title:title,
                            content: span,
                            //text:message,
                            icon:icon,
                            confirmButtonClass:"btn btn-confirm mt-2"
                            }).then(function(){
                                window.location.href = '/partner';
                            }); 
            },
            error:function(err)
            {
                swal({   
                    title:"Error",
                    text:'Error! Please try again',
                    icon:"error",
                    confirmButtonClass:"btn btn-confirm mt-2"
                    }).then(function(){
                        window.location.href = '/partner';
                });
            }
        });        
    }
}

function UploadFileData(file, param)
{   
    if (param==''){
        var file_path=$('#hdn_AWS_S3_path').val()+"bulk_upload/partner_planner/" + $('#hdn_home_user_id').val() + '_' + Date.now() + '_' + file.name;
    }
    else{
        var file_path=$('#hdn_AWS_S3_path').val()+"bulk_upload/Partner MOU/" + param;
    }
    
    var api_url=$('#hdn_COL_url').val() + "s3_signature?file_name="+file_path+"&file_type="+file.type;
    var xhr = new XMLHttpRequest();
    xhr.open("GET",api_url, false );
    xhr.send();

    if(xhr.status === 200 || xhr.status === 204){
        var response = JSON.parse(xhr.responseText);
        uploadFileToS3(file, response.data, response.url);
    }
    else{
        alert("Could not get signed URL.");
    }
}

function uploadFileToS3(file, s3Data, url){
    var xhr = new XMLHttpRequest();
    xhr.open("POST", s3Data.url, false);

    var postData = new FormData();
    for(key in s3Data.fields){
        postData.append(key, s3Data.fields[key]);
    }
    postData.append('file', file);

    xhr.send(postData);
    //console.log(xhr.response);
    if(xhr.status === 200 || xhr.status === 204){
        var response = xhr;
    }
    else{
        alert("Could not upload file to s3.");
    }
}
function AddPartnerModal(){
    $('#isactive2').prop('checked',true);
    $('#ddlBillingMilestones').empty();
    $('#ddlBillingMilestones').append(new Option('Enrollment','1'));
    $('#ddlBillingMilestones').append(new Option('Certification','5'));
    $('#ddlBillingMilestones').append(new Option('Certificate Distribution','6'));
    $('#ddlBillingMilestones').append(new Option('Placement','7'));

    $('#hdn_modal_partner_id3').val($('#hdn_modal_partner_id2').val());

    $('#mdl_Partner_Contract').modal('hide');
    $('#mdl_add_edit_Partner_contract').modal('show');        
}
function AddMilestone()
    {
        let id=$('#ddlBillingMilestones').val();
        let val=$('#ddlBillingMilestones :selected').text();
        //console.log(val);
        if (id=='')
        {
            alert('Please select a value');
            return;
        }
        $("#ddlBillingMilestones option[value="+id+"]").remove();
        MilestoneObject[id]=val;
        let varHtml='';
        varHtml+='<div class="form-group" id="div_milestone_'+id+'">';
        varHtml+='<div class="row">';
        varHtml+='  <div class="col-lg-4" id="milestone-container-'+id+'">';
        varHtml+='      <input type="text" placeholder="" readonly class="form-control" id="billing_milestone_'+id+'" name="milestone['+id+'][billing_milestone]" value="'+val+'" data-value='+id+' >';                                               
        varHtml+='  </div>';
        varHtml+='  <div class="col-lg-4" id="cost-container-'+id+'">';     
        varHtml+='      <input type="number" class="form-control" step="1" id="cost_'+id+'"  name="milestone['+id+'][cost]" placeholder="Enter Cost" required="">';
        varHtml+='  </div>';
        varHtml+='  <div class="col-lg-4" id="milestone-delete-container-'+id+'">';
        varHtml+='      <button type="button" id="milestone_del_btn_'+id+'" data-value="'+id+'" class="btn btn-danger waves-effect waves-light" onclick="removeMilestone(event)"><i class="mdi mdi-close"></i></button>';
        varHtml+='  </div>';     
        varHtml+= '</div>';
        varHtml+= '</div>';
        
        $('#divPartnerMilestones').append(varHtml);
        
        //  LoadPercentBillingMilestones('percentage_billing_milestone_'+id,'',id);
        //  console.log(MilestoneObject);
    }
    function removeMilestone(e) {
        let isBoss = confirm("Are you sure you want to remove milestone?");
        if( isBoss){
            let position = e.currentTarget.getAttribute('data-value');
            let val=$('#billing_milestone_'+position).val();
            $("#ddlBillingMilestones").append('<option value='+position+'>'+val+'</option>');
                $('#div_milestone_'+position).remove();
            delete MilestoneObject[position];
            console.log(MilestoneObject);
        }
        return false;
    }
function add_popup_message(){
    $('#imgSpinner3').show();
    //console.log($('#Contract_Name').val()+$('#ContractCode').val()+$('#StartDate').val()+$('#EndDate').val()+$('#MOUDocument').val()+$('#ddlBillingMilestones').val());
    var validImageTypes = ['image/gif', 'image/jpeg', 'image/png', 'application/pdf'];  // , 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
    var filename_prefix = $('#hdn_home_user_id').val() + '_' + Date.now() + '_'
    var filename = ''
    //hdn_home_user_id_modal2 hdn_home_user_role_id_modal2 hdn_upl_session_id myFile
    var file = document.getElementById('MOUDocument').files[0]
    filename = filename_prefix + file.name
    if (!validImageTypes.includes(file['type'])){
        alert('allowed format are : '+validImageTypes.toString());
        $('#imgSpinner3').hide();
        return
    }
    else if(file.size > 5*1024*1024){
        alert('Image size is not valid');
        $('#imgSpinner3').hide();
        return
    }
    else{
        var varJson='';
        $('#divPartnerMilestones').children('div').each(function(){
        var varDiv=$(this).children('div');
        let milestone_id,cost;
        $(varDiv).children('div').each(function(){
            let id=$(this).attr("id").toString();
            switch(id.substring(0, id.lastIndexOf("-") + 1))
                {
                    case 'milestone-container-':
                        milestone_id=$('#'+id).children('input').attr("data-value");
                        break;
                    case 'cost-container-':
                        cost=$('#'+id).children('input').val();
                        break;
                    case 'rr-percentage-container-':
                        rr_percentage=$('#'+id).children('input').val();
                        break;
                }                
            });
            varJson+='{"milestone_id":'+milestone_id+' ,"cost" :'+cost+'},';
        });        
        varJson='[ ' + varJson.substring(0, varJson.length - 1) + ' ]';

        var form_data = new FormData(); //$('#formUpload')[0]
        //Contract_Name, ContractCode, StartDate, EndDate, filename, BillingMilestones
        form_data.append('Contract_Name',$('#Contract_Name').val());
        form_data.append('ContractCode',$('#ContractCode').val());
        form_data.append('StartDate',$('#StartDate').val());
        form_data.append('EndDate',$('#EndDate').val());
        form_data.append('filename',filename);
        form_data.append('BillingMilestones',$('#ddlBillingMilestones').val());
        form_data.append('PartnerId',$('#hdn_modal_partner_id3').val());
        form_data.append('JSON',varJson);
        form_data.append('is_active',$('#isactive2').prop('checked'));
        form_data.append('PartnerContractId',$('#hdn_modal_partner_contract_id').val());
        
        $.ajax({
            type: 'POST',
            url: $('#hdn_web_url').val()+ "/add_edit_partner_contract",
            enctype: 'multipart/form-data',
            data: form_data,
            contentType: false,
            cache: false,
            processData: false,
            success: function(data) 
            {   //PopupMessage, message, Status
                //console.log(data)
                var status;
                file = document.getElementById('MOUDocument').files[0]
                //file = document.getElementById('myFile').files[0]
                UploadFileData(file,filename);
                status = true;
                $('#imgSpinner3').hide();
                var message="",title="",icon="";
                if(data.PopupMessage.Status){
                    message=data.PopupMessage.message;
                    title="Success";
                    icon="success";
                }
                else{
                    if (data.PopupMessage.message=="Validation_Error"){
                        message=data.error;
                        title="Error";
                        icon="error";
                    }
                    else {
                        message=data.PopupMessage.message;
                        title="Error";
                        icon="error";
                    }
                }
                var span = document.createElement("span");
                span.innerHTML = message;
                swal({   
                            title:title,
                            content: span,
                            icon:icon,
                            confirmButtonClass:"btn btn-confirm mt-2"
                            }).then(function(){
                                window.location.href = '/partner';
                                //Create_add_Remove_attachment_Html($('#hdn_upl_session_id').val());
                            });
            },
            error:function(err)
            {
                console.log(err)
                swal({   
                    title:"Error",
                    text:'Error! Please try again',
                    icon:"error",
                    confirmButtonClass:"btn btn-confirm mt-2"
                    }).then(function(){
                        window.location.href = '/partner';
                        //Create_add_Remove_attachment_Html($('#hdn_upl_session_id').val());
                });
            }
        });
    }
}
</script>
<!-- ============================================================== -->
<!-- Start Page Content here -->
<!-- ============================================================== -->
<div class="container-fluid">
    <!-- start page title -->
    <div class="row">
        <div class="col-12">
            <div class="page-title-box">
                <div class="page-title-right">
                    <ol class="breadcrumb m-0">
                        <li class="breadcrumb-item"><a href="javascript: void(0);">NEO</a></li>
                        <li class="breadcrumb-item active">Partners</li>
                    </ol>
                </div>
                <h4 class="page-title">Partners</h4>
            </div>
        </div>
    </div>     
    <!-- end page title -->
    
    <div class="row">
        <div class="col-12">
            <div class="card-box">
                <form id="form1" action="/assign_partner_add_edit_to_home" method="POST">
                    <input type="hidden" id="hdn_partner_id" name="hdn_partner_id" value="0">
                    <div class="row"> 
                        <div class="col-lg-3">
                            <label for="ddlPartnerTypes" class="mr-2">Partner Types</label>
                                <select class="form-control dropdown-search-filter" id="ddlPartnerTypes" multiple >
                            </select>
                        </div>   
                        
                        <div class="col-lg-3" >
                            <button style="margin-top: 30px" type="button" class="btn btn-success waves-effect waves-light" onclick="LoadTable()">Search</button>
                        </div>
                        <div class="col-lg-4" >
                            <button style="float: right; margin-top: 30px; margin-right:10px;"  id="btn_upload" onclick="Upload_DownloadPartnerTargetMdl()" type="button" class="btn btn-info waves-effect waves-light">Upload/Download Target</a>
                        </div>
                        <div class="col-lg-2" >                                        
                            <button style="margin-top: 30px; float: right;" type="submit" id="btn_create" class="btn btn-primary">Create Partner</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div id="get" class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <h4 class="header-title">Partner List</h4>
                        </div>
                        
                    </div>
                    <br/>
                    <div class="col-lg-12">
                        <table id="tbl_list" class="table dt-responsive wrap">
                            <thead>
                                <tr>
                                    <th>S.No</th>
                                    <th>Actions</th>
                                    <th>Partner Name</th>
                                    <th>Partner Type</th>
                                    <th>Center</th>
                                    <th>POC</th>
                                    <th>Contract</th>
                                    <th>Address</th>
                                    <th>Status</th>                                    
                                </tr>
                            </thead>
                        <tbody></tbody>
                        </table>
                    </div>
                </div> <!-- end card body-->
            </div> <!-- end card -->
        </div><!-- end col-->
    </div>
    <!-- end row-->    
</div> <!-- end container -->
    
    <!-- end wrapper -->
</form>

<div id="mdl_Partner_Users" class="modal fade" role="dialog">
    <div class="modal-dialog modal-xl">
        <div class="modal-content ">
            <div class="modal-header">
                <h4 class="modal-title" ><span id="headerUsers"></span></h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>                    
            <div class="modal-body">
                <input type="hidden" id="hdn_modal_partner_id" name="hdn_modal_partner_id" value="0">
                <div class="row">
                    <div class="col-md-12">
                        <button style="float: right;" type="button" id="btn_add" onclick="AddModal()" class="btn btn-primary">Add User</a>
                    </div>
                </div>
            </br>
                <div >
                    <table id="tbl_users" class="table table-bordered dt-responsive nowrap" style="border-color: lightgray;width:100% !important;font-size: 12px;">
                        <thead>
                            <tr style="background-color: #f5f6f8;">
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">S.No</th>
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">Action</th>
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">Name</th>
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">Email</th>
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">Mobile</th>
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">NEO Role</th>
                            </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>	
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary waves-effect" data-dismiss="modal"> Close</button>
            </div>
        </div>
    </div>
</div><!--/.modal-->

<div id="mdl_add_edit_Users" class="modal fade" role="dialog">
    <div class="modal-dialog modal-xl">
        <div class="modal-content ">
            <form action="javascript:AddeEditPartnerUser();" method="POST" >
                <div class="modal-header">
                    <h4 class="modal-title" ><span id="header">Partner User Details</span></h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                </div>                    
                <div class="modal-body">
                    <div class="col-12">
                        <input type="hidden" id="hdn_partner_user_id" name="hdn_partner_user_id" value="0">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-lg-4">
                                    <label for="UserName">Name * :</label>
                                </div>
                                <div class="col-lg-6">
                                    <input type="text" class="form-control" name="UserName" id="UserName" required placeholder="Name">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <div class="col-lg-4">
                                    <label for="Mobile">Mobile * :</label>
                                </div>
                                <div class="col-lg-6">
                                    <input type="number" class="form-control" name="Mobile" id="Mobile" required placeholder="Mobile">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <div class="col-lg-4">
                                    <label for="Email">Email * :</label>
                                </div>
                                <div class="col-lg-6">
                                    <input type="email" class="form-control" name="Email" id="Email" required placeholder="Email">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <div class="col-lg-4">
                                    <label>Is Active :</label>
                                </div>
                                <div class="col-lg-6">
                                    <div class="checkbox checkbox-pink mb-0">
                                        <input type="checkbox" name="isactive" id="isactive" ClientIdMode="static" 
                                                        value="1" data-parsley-mincheck="1" >
                                        <label for="isactive"> Is active </label>
                                    </div>
                                </div>   
                            </div>                                     
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary waves-effect" > Save</button>
                    <button type="button" class="btn btn-secondary waves-effect" data-dismiss="modal"> Close</button>
                </div>
            </form>
        </div>
    </div>
</div><!--/.modal-->

<div id="mdl_Partner_Centers" class="modal fade" role="dialog">
    <div class="modal-dialog modal-xl">
        <div class="modal-content ">
            <div class="modal-header">
                <h4 class="modal-title" ><span id="headerCenters"></span></h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>                    
            <div class="modal-body">
                <input type="hidden" id="hdn_modal_partner_id_center" name="hdn_modal_partner_id_center" value="0">
                <div >
                    <table id="tbl_centers" class="table table-bordered dt-responsive nowrap" style="border-color: lightgray;width:100% !important;font-size: 12px;">
                        <thead>
                            <tr style="background-color: #f5f6f8;">
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">S.No</th>
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">Center Name</th>
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">Center Code</th>
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">Center Type</th>
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">Region</th>
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">State</th>
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">District</th>
                            </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>	
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary waves-effect" data-dismiss="modal"> Close</button>
            </div>
        </div>
    </div>
</div><!--/.modal-->

<div id="mdl_upload_download_partner_target_plan" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content ">
            <form id="formUpload" action="javascript:UploadFileDataPartner()">
            <div class="modal-header">
                <h4 class="modal-title"><span id="HduploadFile"></span></h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <div class="row">
                        <div class="col-lg-4">
                            <label for="myFile">Upload File* :</label>
                        </div>
                        <div class="col-lg-4">
                            <input type="file" id="myFile" name="filename">
                        </div>
                        <div class="col-lg-4">
                            <button class="btn btn-info btn-sm waves-effect waves-light" style="float: right;" type="button" onclick="DownloadPartnerTargetPlanTemplate()">Download Template</button>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-12">
                            <button class="btn btn-info btn-sm waves-effect waves-light" style="float: right;" type="button" onclick="Download_Partner_Target()">Download Partner Target</button>
                            <!-- <a class="btn btn-primary" style="color:white;font-weight:bold;cursor:pointer;margin-top:30px; float: left;" onclick="DownloadTableBasedOnFilter()">Download</a>  float: right; -->
                            <a id="lnkDownload" style="display:none;"></a>
                        </div>    
                    </div>  
                </div>
            </div>

            <div class="modal-footer">
                <div id="imgSpinner2"> <!--style="margin-top: 9px;margin-bottom: -23px;"-->
                    <img src="static/assets/images/spinner1_old.gif" style="height:30px;display:inline-block;"/>
                    <label id="imgSpinner2_label" style="display:inline-block;">Please wait while uploading...</label>
                </div>
                <div>
                    <button class="btn btn-primary waves-effect" type="submit" >Upload</button>
                    <button type="button" class="btn btn-secondary waves-effect" data-dismiss="modal" >Close</button>
                </div>
            </div>
        </form>
        </div>
    </div>
</div><!--/.modal-->


<div id="mdl_Partner_Contract" class="modal fade" role="dialog">
    <div class="modal-dialog modal-xl">
        <div class="modal-content ">
            <div class="modal-header">
                <h4 class="modal-title" ><span id="headerPartnerContract"></span></h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>                    
            <div class="modal-body">
                <input type="hidden" id="hdn_modal_partner_id2" name="hdn_modal_partner_id2" value="0">

                <div class="row">
                    <div class="col-md-12">
                        <button style="float: right;" type="button" id="btn_add" onclick="AddPartnerModal()" class="btn btn-primary">Add Partner Contract</a>
                    </div>
                </div>
            </br>
                <div >
                    <table id="tbl_partner_contract" class="table table-bordered dt-responsive nowrap" style="border-color: lightgray;width:100% !important;font-size: 12px;">
                        <thead>
                            <tr style="background-color: #f5f6f8;">
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">S.No</th>
                                <!-- <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">Action</th> -->
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">Contract Name</th>
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">Contract Code</th>
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">Contract Start Date</th>
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">Contract End Date</th>
                                <th  style="border-bottom-color: lightgray;vertical-align:middle;text-align:center;">MOU Document</th>
                            </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>	
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary waves-effect" data-dismiss="modal"> Close</button>
            </div>
        </div>
    </div>
</div><!--/.modal-->

<div id="mdl_add_edit_Partner_contract" class="modal fade" style="overflow:auto;" role="dialog">
    <div class="modal-dialog modal-xl">
        <div class="modal-content ">
            <form action="javascript:add_popup_message();" method="POST" >
            <input type="hidden" id="hdn_modal_partner_contract_id" name="hdn_modal_partner_contract_id" value="0">
            <input type="hidden" id="hdn_modal_partner_id3" name="hdn_modal_partner_id3" value="0">
            <div class="modal-header">
                <h4 class="modal-title" ><span id="header">Partner Contract Details</span></h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body" id="ModalParnterContractInfo">
                <div class="row">
                    <div class="col-12">
                        <div class="card-box">
                            <br/>
                            <div class="alert alert-warning d-none fade show">
                                <h4>Oh snap!</h4>
                                <p class="mb-0">This form seems to be invalid :(</p>
                            </div>
                            <div class="alert alert-info d-none fade show">
                                <h4>Yay!</h4>
                                <p class="mb-0">Everything seems to be ok :)</p>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <label for="Contract_Name">Contract Name * :</label>
                                    </div>
                                    <div class="col-lg-6">
                                        <input type="text" class="form-control" name="Contract_Name" id="Contract_Name" required placeholder="Contract Name">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <label for="ContractCode">Contract Code * :</label>
                                    </div>
                                    <div class="col-lg-6">
                                        <input type="text" class="form-control" name="ContractCode" id="ContractCode" required placeholder="Contract Code">
                                    </div>
                                </div>
                            </div>  
                            <div class="form-group row ">
                                    <div class="col-lg-6">
                                            <label for="StartDate">Start Date</label>
                                        </div>
                                        <div class="col-lg-6">
                                    <input type="text" id="StartDate" name="StartDate" class="form-control date-picker" ClientIdMode="static" placeholder="Start Date" required="">
                                </div>
                            </div>
                            <div class="form-group row ">
                                    <div class="col-lg-6">
                                            <label for="EndDate">End Date</label>
                                        </div>
                                        <div class="col-lg-6">
                                    <input type="text" id="EndDate" name="EndDate" class="form-control date-picker" ClientIdMode="static" placeholder="EndDate" required="">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <label for="MOUDocument">MOU Document * :</label>
                                    </div>
                                    <div class="col-lg-6">
                                        <input type="file" class="form-control" name="MOUDocument" id="MOUDocument" required placeholder="MOU Document">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <label for="ddlBillingMilestones">Milestones :</label>
                                    </div>
                                    <div class="col-lg-6">
                                        <select id="ddlBillingMilestones" class="form-control " name="ddlBillingMilestones" ClientIdMode="static" >
                                        </select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-12">
                                        <button type="button" class="btn btn-secondary btn-rounded" style="float:right; margin-top: 10px;"
                                            id="btnAddMilestones" onclick="AddMilestone();">Add</button>
                                    </div>
                                </div>
                            </div> 
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-lg-6" id="milestone-container">
                                        <h5> Milestone*:</h5>
                                    </div>
                                    <div class="col-lg-6" id="milestone-container">
                                        <h5>Cost per candidate:</h5>
                                    </div>
                                </div>
                            </div>
                            <div id="divPartnerMilestones">
                                
                            </div> 
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <label>Is Active *:</label>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="checkbox checkbox-pink mb-0">
                                            <input type="checkbox" name="isactive2" id="isactive2" ClientIdMode="static" 
                                                            value="1" data-parsley-mincheck="1" >
                                            <label for="isactive2"> Is active </label>
                                        </div>
                                    </div>   
                                </div>                                     
                            </div>
                            <!-- <div class="form-group mb-0">
                                <button class="btn btn-primary" type="submit">Save</button>
                            </div> -->
                        </div> <!-- end card-box-->
                    </div> <!-- end col-->
                </div>
                
            </div>
            <div class="modal-footer">
                <div id="imgSpinner3" style="display: none;"> <!--style="margin-top: 9px;margin-bottom: -23px;"-->
                    <img src="static/assets/images/spinner1_old.gif" style="height:30px;display:inline-block;"/>
                    <label id="imgSpinner3_label" style="display:inline-block;">Please wait while uploading...</label>
                </div>
                <div>
                    <button type="submit" class="btn btn-primary waves-effect" > Save</button>
                    <button type="button" class="btn btn-secondary waves-effect" data-dismiss="modal"> Close</button>
                </div>
            </div>
            </form>
            <form id='form2' method="POST" action="/assign_project_add_edit_to_home">
                <input type="hidden" id="hdn_project_id" name="hdn_project_id" value="0">
            </form>
        </div>
    </div>
</div><!--/.modal-->


<!-- ============================================================== -->
<!-- End Page content -->
<!-- ============================================================== -->
<!-- Footer Start -->



<!-- third party js -->
<script src="static/assets/libs/datatables/jquery.dataTables.min.js"></script>
<script src="static/assets/libs/datatables/dataTables.bootstrap4.js"></script>
<script src="static/assets/libs/datatables/dataTables.responsive.min.js"></script>
<script src="static/assets/libs/datatables/responsive.bootstrap4.min.js"></script>
<script src="static/assets/libs/datatables/dataTables.buttons.min.js"></script>
<script src="static/assets/libs/datatables/buttons.bootstrap4.min.js"></script>
<script src="static/assets/libs/datatables/buttons.html5.min.js"></script>
<script src="static/assets/libs/datatables/buttons.flash.min.js"></script>
<script src="static/assets/libs/datatables/buttons.print.min.js"></script>
<script src="static/assets/libs/datatables/dataTables.keyTable.min.js"></script>
<script src="static/assets/libs/datatables/dataTables.select.min.js"></script>        
<!-- third party js ends -->
<!-- <script src="static/assets/js/pages/qp-list.js"></script> -->